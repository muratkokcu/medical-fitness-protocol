<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medikal Fitness Check-up</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'SF Pro Text', sans-serif;
            line-height: 1.47059;
            color: #1D1D1F;
            background: #FFFFFF;
            min-height: 100vh;
            padding: 20px;
            font-size: 17px;
            font-weight: 400;
            letter-spacing: -0.022em;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #FFFFFF;
            border-radius: 18px;
            border: 1px solid #D2D2D7;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: #FFFFFF;
            color: #000000;
            padding: 48px 30px 32px;
            text-align: center;
            border-bottom: 1px solid #D2D2D7;
        }

        .header h1 {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.003em;
            margin-bottom: 8px;
            color: #000000;
        }

        .header p {
            font-size: 19px;
            font-weight: 400;
            color: #6E6E73;
            letter-spacing: 0.012em;
        }

        .content {
            padding: 32px;
        }

        .section {
            background: #FFFFFF;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 16px;
            border: 1px solid #D2D2D7;
            transition: all 0.2s ease-out;
        }

        .section:hover {
            background: #F5F5F7;
            border-color: #000000;
        }

        .section-title {
            color: #000000;
            font-size: 24px;
            font-weight: 600;
            letter-spacing: -0.009em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            margin-right: 12px;
            font-size: 16px;
            font-weight: 500;
            color: #000000;
        }

        .section-title.general::before { content: "●"; }
        .section-title.cardiovascular::before { content: "◆"; }
        .section-title.body-composition::before { content: "■"; }
        .section-title.respiratory::before { content: "○"; }
        .section-title.biomechanical::before { content: "▲"; }
        .section-title.mobility::before { content: "◯"; }
        .section-title.posture::before { content: "▪"; }
        .section-title.strength::before { content: "▶"; }
        .section-title.clinical::before { content: "◾"; }
        .section-title.report::before { content: "⬢"; }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 16px;
            color: #000000;
            letter-spacing: -0.009em;
        }

        input, select, textarea {
            width: 100%;
            padding: 11px 13px;
            border: 1px solid #D2D2D7;
            border-radius: 8px;
            font-size: 17px;
            font-weight: 400;
            color: #1D1D1F;
            background: #FFFFFF;
            transition: all 0.2s ease-out;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #000000;
            border-width: 2px;
        }

        input:invalid {
            border-color: #6E6E73;
        }

        input:valid {
            border-color: #D2D2D7;
        }

        .required {
            position: relative;
        }

        .required::after {
            content: "*";
            color: #6E6E73;
            margin-left: 4px;
            font-weight: 400;
        }

        .progress-indicator {
            position: sticky;
            top: 20px;
            background: #FFFFFF;
            padding: 16px;
            border-radius: 12px;
            border: 1px solid #D2D2D7;
            margin-bottom: 20px;
            z-index: 100;
        }

        .progress-text {
            text-align: center;
            font-weight: 500;
            font-size: 16px;
            color: #000000;
            margin-bottom: 12px;
            letter-spacing: -0.009em;
        }

        .progress-bar-container {
            background: #D2D2D7;
            border-radius: 4px;
            height: 4px;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background: #000000;
            transition: width 0.3s ease-out;
            border-radius: 4px;
        }

        .test-item {
            background: #FFFFFF;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 16px;
            border: 1px solid #D2D2D7;
            transition: all 0.2s ease-out;
        }

        .test-item:hover {
            background: #F5F5F7;
            border-color: #6E6E73;
        }

        .test-name {
            font-weight: 600;
            font-size: 17px;
            color: #000000;
            margin-bottom: 12px;
            letter-spacing: -0.009em;
        }

        .test-ranges {
            font-size: 15px;
            font-weight: 400;
            color: #6E6E73;
            margin-bottom: 12px;
            background: #F5F5F7;
            padding: 12px;
            border-radius: 6px;
            line-height: 1.47059;
        }

        .result-display {
            padding: 16px;
            border-radius: 8px;
            font-weight: 500;
            font-size: 17px;
            text-align: center;
            margin-top: 12px;
            letter-spacing: -0.022em;
        }

        .result-excellent { background: #000000; color: #FFFFFF; }
        .result-good { background: #1D1D1F; color: #FFFFFF; }
        .result-normal { background: #6E6E73; color: #FFFFFF; }
        .result-risky { background: #000000; color: #FFFFFF; border: 2px solid #6E6E73; }

        .calculate-btn {
            background: #000000;
            color: #FFFFFF;
            border: none;
            padding: 11px 22px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: 500;
            letter-spacing: -0.022em;
            transition: all 0.2s ease-out;
            min-height: 44px;
        }

        .calculate-btn:hover {
            background: #1D1D1F;
            transform: scale(0.98);
        }

        .calculate-btn:active {
            transform: scale(0.96);
            background: #6E6E73;
        }

        .report-section {
            background: #F5F5F7;
            border: 1px solid #D2D2D7;
            border-radius: 12px;
            padding: 32px;
            margin-top: 32px;
        }

        .report-title {
            font-size: 32px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 24px;
            text-align: center;
            letter-spacing: -0.003em;
        }

        .progress-bar {
            background: #D2D2D7;
            border-radius: 4px;
            height: 6px;
            overflow: hidden;
            margin: 12px 0;
        }

        .progress-fill {
            height: 100%;
            background: #000000;
            transition: width 0.4s ease-out;
            border-radius: 4px;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .summary-card {
            background: #FFFFFF;
            border: 1px solid #D2D2D7;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease-out;
        }

        .summary-card:hover {
            border-color: #6E6E73;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .summary-card h3 {
            font-size: 20px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 16px;
            letter-spacing: -0.022em;
            border-bottom: 1px solid #D2D2D7;
            padding-bottom: 8px;
        }

        .summary-card p {
            font-size: 15px;
            color: #1D1D1F;
            margin-bottom: 8px;
            line-height: 1.47059;
        }

        .summary-card strong {
            color: #000000;
            font-weight: 500;
        }

        .summary-actions {
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
            margin-top: 32px;
            padding-top: 32px;
            border-top: 1px solid #D2D2D7;
        }

        @media (max-width: 768px) {
            .summary-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .summary-card {
                padding: 20px;
            }

            .summary-actions {
                flex-direction: column;
                align-items: center;
            }
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .content {
                padding: 20px;
            }
        }

        .export-btn {
            background: #FFFFFF;
            color: #000000;
            border: 1px solid #000000;
            padding: 11px 22px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: 500;
            margin: 8px;
            transition: all 0.2s ease-out;
            min-height: 44px;
            letter-spacing: -0.022em;
        }

        .export-btn:hover {
            background: #000000;
            color: #FFFFFF;
            transform: scale(0.98);
        }

        .export-btn:active {
            transform: scale(0.96);
        }

        /* Progressive Assessment Styles */
        .assessment-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .progress-header {
            position: sticky;
            top: 0;
            background: #FFFFFF;
            border-bottom: 1px solid #D2D2D7;
            padding: 16px 32px;
            z-index: 100;
        }

        .step-counter {
            text-align: center;
            font-size: 15px;
            font-weight: 500;
            color: #6E6E73;
            margin-bottom: 12px;
        }

        .progress-bar-main {
            background: #D2D2D7;
            border-radius: 4px;
            height: 4px;
            overflow: hidden;
        }

        .progress-fill-main {
            height: 100%;
            background: #000000;
            transition: width 0.4s ease-out;
            border-radius: 4px;
        }

        .assessment-card {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 32px;
            min-height: calc(100vh - 160px);
        }

        .card-content {
            width: 100%;
            max-width: 600px;
            background: #FFFFFF;
            border: 1px solid #D2D2D7;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 28px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 8px;
            letter-spacing: -0.003em;
            text-align: center;
        }

        .card-subtitle {
            font-size: 17px;
            color: #6E6E73;
            margin-bottom: 32px;
            text-align: center;
            line-height: 1.47059;
        }

        .navigation-footer {
            background: #F5F5F7;
            border-top: 1px solid #D2D2D7;
            padding: 20px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-btn {
            background: #000000;
            color: #FFFFFF;
            border: none;
            padding: 11px 22px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 17px;
            font-weight: 500;
            letter-spacing: -0.022em;
            transition: all 0.2s ease-out;
            min-height: 44px;
            min-width: 100px;
        }

        .nav-btn:disabled {
            background: #D2D2D7;
            color: #6E6E73;
            cursor: not-allowed;
        }

        .nav-btn.secondary {
            background: #FFFFFF;
            color: #000000;
            border: 1px solid #000000;
        }

        .nav-btn.secondary:hover:not(:disabled) {
            background: #000000;
            color: #FFFFFF;
        }

        .nav-btn:hover:not(:disabled) {
            background: #1D1D1F;
            transform: scale(0.98);
        }

        .step-hidden {
            display: none;
        }

        .welcome-screen {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .welcome-title {
            font-size: 48px;
            font-weight: 700;
            color: #000000;
            margin-bottom: 16px;
            letter-spacing: -0.003em;
        }

        .welcome-subtitle {
            font-size: 19px;
            color: #6E6E73;
            margin-bottom: 40px;
            line-height: 1.47059;
        }

        .start-btn {
            background: #000000;
            color: #FFFFFF;
            border: none;
            padding: 16px 32px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 19px;
            font-weight: 600;
            letter-spacing: -0.022em;
            transition: all 0.2s ease-out;
            min-height: 56px;
        }

        .start-btn:hover {
            background: #1D1D1F;
            transform: scale(0.98);
        }

        .assessment-step {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .summary-dashboard {
            background: #F5F5F7;
            border-radius: 12px;
            padding: 24px;
            margin: 24px 0;
        }

        .score-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #000000;
            color: #FFFFFF;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-size: 32px;
            font-weight: 700;
        }

        .category-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #D2D2D7;
        }

        .category-row:last-child {
            border-bottom: none;
        }

        .category-name {
            font-weight: 500;
            color: #000000;
        }

        .category-score {
            font-weight: 600;
            color: #6E6E73;
        }

        @media (max-width: 768px) {
            .assessment-card {
                padding: 20px;
                min-height: calc(100vh - 140px);
            }
            
            .card-content {
                padding: 24px;
            }
            
            .navigation-footer {
                padding: 16px 20px;
            }
            
            .welcome-title {
                font-size: 32px;
            }
        }
    </style>
</head>
<body>
    <div class="assessment-container">
        <!-- Progress Header -->
        <div class="progress-header">
            <div class="step-counter" id="stepCounter">Adım 0 / 17</div>
            <div class="progress-bar-main">
                <div class="progress-fill-main" id="progressFillMain" style="width: 0%;"></div>
            </div>
        </div>

        <!-- Assessment Card -->
        <div class="assessment-card">
            <div class="card-content" id="assessmentContent">
                <!-- Steps will be dynamically loaded here -->
            </div>
        </div>

        <!-- Navigation Footer -->
        <div class="navigation-footer">
            <button class="nav-btn secondary" id="prevBtn" onclick="previousStep()" disabled>Önceki</button>
            <button class="nav-btn" id="nextBtn" onclick="nextStep()">Başla</button>
        </div>
    </div>

    <script>
        // Progressive Assessment System
        let currentStep = 0;
        let totalSteps = 18;
        let assessmentData = {};
        let testResults = {};

        // Assessment step configurations
        const assessmentSteps = [
            // Step 0: Welcome
            {
                id: 'welcome',
                title: 'Medikal Fitness Check-up',
                subtitle: 'Kapsamlı sağlık ve fitness değerlendirme sistemine hoş geldiniz. 16 adımlık değerlendirme ile sağlık durumunuzu analiz edecek ve size özel öneriler sunacağız.',
                type: 'welcome'
            },
            // Step 1: Personal Info
            {
                id: 'personal',
                title: 'Kişisel Bilgiler',
                subtitle: 'Değerlendirme için temel bilgilerinizi girin',
                type: 'form',
                fields: [
                    {id: 'fullName', label: 'Üye Adı Soyadı', type: 'text', required: true, placeholder: 'Ad Soyad'},
                    {id: 'gender', label: 'Cinsiyet', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'male', text: 'Erkek'},
                        {value: 'female', text: 'Kadın'}
                    ]},
                    {id: 'age', label: 'Yaş', type: 'number', placeholder: '25'},
                    {id: 'height', label: 'Boy (cm)', type: 'number', placeholder: '175'},
                    {id: 'weight', label: 'Kilo (kg)', type: 'number', placeholder: '70'},
                    {id: 'trainer', label: 'Trainer', type: 'text', placeholder: 'Trainer adı'}
                ]
            },
            // Step 2: Blood Pressure
            {
                id: 'bloodpressure',
                title: 'Tansiyon Ölçümü',
                subtitle: 'Sistolik ve diastolik tansiyon değerlerinizi girin',
                type: 'assessment',
                info: 'Normal: 120-80 | 1. Seviye: 140-90 | 2. Seviye: 160-100 | 3. Seviye: 160-110',
                fields: [
                    {id: 'systolic', label: 'Sistolik (üst değer)', type: 'number', placeholder: '120'},
                    {id: 'diastolic', label: 'Diastolik (alt değer)', type: 'number', placeholder: '80'}
                ]
            },
            // Step 3: Pulse
            {
                id: 'pulse',
                title: 'Nabız Ölçümü',
                subtitle: 'Dinlenik nabzınızı ölçün',
                type: 'assessment',
                info: 'Çok İyi: 46-60 | Normal: 60-80 | Yüksek: 85-100 | Riskli: 100+',
                fields: [
                    {id: 'pulse', label: 'Dinlenik Nabız (bpm)', type: 'number', placeholder: '70'}
                ]
            },
            // Step 4: Body Fat
            {
                id: 'bodyfat',
                title: 'Vücut Yağ Oranı',
                subtitle: 'Vücut yağ oranınızı girin',
                type: 'assessment',
                info: 'Erkek: Çok İyi 8-12% | Normal 13-20% | Riskli 20%+ <br> Kadın: Çok İyi 14-20% | Normal 21-31% | Riskli 31%+',
                fields: [
                    {id: 'bodyFat', label: 'Vücut Yağ Oranı (%)', type: 'number', step: '0.1', placeholder: '15'}
                ]
            },
            // Step 5: Waist Hip Ratio
            {
                id: 'whr',
                title: 'Bel Kalça Oranı',
                subtitle: 'Bel ve kalça çevresi ölçümlerinizi girin',
                type: 'assessment',
                info: 'Erkek: Çok İyi <0.85 | İyi 0.85-0.90 | Riskli 0.95+ <br> Kadın: Çok İyi <0.75 | İyi 0.75-0.80 | Riskli 0.95+',
                fields: [
                    {id: 'waist', label: 'Bel Çevresi (cm)', type: 'number', placeholder: '80'},
                    {id: 'hip', label: 'Kalça Çevresi (cm)', type: 'number', placeholder: '90'}
                ]
            },
            // Step 6: Respiratory Function
            {
                id: 'respiratory',
                title: 'Solunum Fonksiyonu',
                subtitle: 'Solunum kapasitesi değerlendirmesi',
                type: 'assessment',
                info: 'Peak Flow ölçümü yaş ve cinsiyete göre değerlendirilir',
                fields: [
                    {id: 'peakFlow', label: 'Peak Flow (L/dk)', type: 'number', placeholder: '400'},
                    {id: 'breathHold', label: 'Nefes Tutma (saniye)', type: 'number', placeholder: '45'}
                ]
            },
            // Step 7: Foot Analysis
            {
                id: 'footAnalysis',
                title: 'Ayak Analizi',
                subtitle: 'Ayak yapısı ve duruşu değerlendirmesi',
                type: 'assessment',
                info: 'Düz tabanlık, ayak deformiteleri ve yürüyüş analizi',
                fields: [
                    {id: 'footType', label: 'Ayak Tipi', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'normal', text: 'Normal'},
                        {value: 'flatfoot', text: 'Düz Tabanlık'},
                        {value: 'higharch', text: 'Yüksek Kemer'},
                        {value: 'other', text: 'Diğer Deformite'}
                    ]},
                    {id: 'gaitAnalysis', label: 'Yürüyüş Analizi', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'normal', text: 'Normal'},
                        {value: 'abnormal', text: 'Anormal'},
                        {value: 'needsAssessment', text: 'Detay Değerlendirme Gerekli'}
                    ]}
                ]
            },
            // Step 8: Balance Test
            {
                id: 'balance',
                title: 'Denge Testi',
                subtitle: 'Statik ve dinamik denge değerlendirmesi',
                type: 'assessment',
                info: 'Tek ayak üzerinde durma süresi ve denge skorları',
                fields: [
                    {id: 'singleLegStand', label: 'Tek Ayak Durma (saniye)', type: 'number', placeholder: '30'},
                    {id: 'balanceScore', label: 'Denge Skoru (1-10)', type: 'number', min: '1', max: '10', placeholder: '8'}
                ]
            },
            // Step 9: Shoulder Mobility
            {
                id: 'shoulderMobility',
                title: 'Omuz Mobilitesi',
                subtitle: 'Omuz eklem hareket genişliği',
                type: 'assessment',
                info: 'Omuz fleksiyonu, abdüksiyonu ve rotasyon değerlendirmesi',
                fields: [
                    {id: 'shoulderFlexion', label: 'Omuz Fleksiyonu (derece)', type: 'number', placeholder: '180'},
                    {id: 'shoulderAbduction', label: 'Omuz Abdüksiyonu (derece)', type: 'number', placeholder: '180'},
                    {id: 'shoulderRotation', label: 'İç/Dış Rotasyon', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'normal', text: 'Normal'},
                        {value: 'limited', text: 'Kısıtlı'},
                        {value: 'painful', text: 'Ağrılı'}
                    ]}
                ]
            },
            // Step 10: Trunk Flexibility
            {
                id: 'trunkFlexibility',
                title: 'Gövde Esnekliği',
                subtitle: 'Spinal mobilite ve esneklik testi',
                type: 'assessment',
                info: 'Otur-eriş testi ve spinal hareket genişliği',
                fields: [
                    {id: 'sitReach', label: 'Otur-Eriş Testi (cm)', type: 'number', placeholder: '25'},
                    {id: 'spinalFlexion', label: 'Spinal Fleksiyon (derece)', type: 'number', placeholder: '60'},
                    {id: 'spinalExtension', label: 'Spinal Ekstansiyon (derece)', type: 'number', placeholder: '25'}
                ]
            },
            // Step 11: Static Posture
            {
                id: 'staticPosture',
                title: 'Statik Postür',
                subtitle: 'Ayakta duruş postürü analizi',
                type: 'assessment',
                info: 'Baş, omuz, pelvis ve ayak pozisyonu değerlendirmesi',
                fields: [
                    {id: 'headPosture', label: 'Baş Postürü', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'normal', text: 'Normal'},
                        {value: 'forward', text: 'İleri Eğik'},
                        {value: 'backward', text: 'Geri Eğik'}
                    ]},
                    {id: 'shoulderLevel', label: 'Omuz Seviyesi', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'level', text: 'Aynı Seviyede'},
                        {value: 'leftHigh', text: 'Sol Yüksek'},
                        {value: 'rightHigh', text: 'Sağ Yüksek'}
                    ]},
                    {id: 'spinalCurvature', label: 'Spinal Eğrilik', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'normal', text: 'Normal'},
                        {value: 'kyphosis', text: 'Kifoz'},
                        {value: 'lordosis', text: 'Lordoz'},
                        {value: 'scoliosis', text: 'Skolyoz'}
                    ]}
                ]
            },
            // Step 12: Dynamic Posture
            {
                id: 'dynamicPosture',
                title: 'Dinamik Postür',
                subtitle: 'Hareket sırasında postür değerlendirmesi',
                type: 'assessment',
                info: 'Yürüyüş, koşu ve fonksiyonel hareket analizi',
                fields: [
                    {id: 'walkingPosture', label: 'Yürüyüş Postürü', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'normal', text: 'Normal'},
                        {value: 'abnormal', text: 'Anormal Patern'},
                        {value: 'compensatory', text: 'Kompansatuar Hareket'}
                    ]},
                    {id: 'functionalMovement', label: 'Fonksiyonel Hareket', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'excellent', text: 'Mükemmel'},
                        {value: 'good', text: 'İyi'},
                        {value: 'needsImprovement', text: 'Geliştirilmeli'}
                    ]}
                ]
            },
            // Step 13: Postural Syndromes
            {
                id: 'posturalSyndromes',
                title: 'Postüral Sendromlar',
                subtitle: 'Postüral bozukluklar ve sendromlar',
                type: 'assessment',
                info: 'Upper Cross, Lower Cross ve diğer postüral sendromlar',
                fields: [
                    {id: 'upperCross', label: 'Upper Cross Sendromu', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'none', text: 'Yok'},
                        {value: 'mild', text: 'Hafif'},
                        {value: 'moderate', text: 'Orta'},
                        {value: 'severe', text: 'Şiddetli'}
                    ]},
                    {id: 'lowerCross', label: 'Lower Cross Sendromu', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'none', text: 'Yok'},
                        {value: 'mild', text: 'Hafif'},
                        {value: 'moderate', text: 'Orta'},
                        {value: 'severe', text: 'Şiddetli'}
                    ]},
                    {id: 'otherSyndromes', label: 'Diğer Sendromlar', type: 'textarea', placeholder: 'Gözlemlenen diğer postüral problemler...', rows: 3}
                ]
            },
            // Step 14: Strength Tests
            {
                id: 'strengthTests',
                title: 'Kuvvet Testleri',
                subtitle: 'Kas kuvveti değerlendirmesi',
                type: 'assessment',
                info: 'El kavrama, core stability ve genel kas kuvveti',
                fields: [
                    {id: 'gripStrength', label: 'El Kavrama Kuvveti (kg)', type: 'number', placeholder: '40'},
                    {id: 'pushUps', label: 'Şınav Sayısı', type: 'number', placeholder: '20'},
                    {id: 'plankTime', label: 'Plank Süresi (saniye)', type: 'number', placeholder: '60'},
                    {id: 'squats', label: 'Squat Sayısı', type: 'number', placeholder: '25'}
                ]
            },
            // Step 15: Cardiovascular Tests
            {
                id: 'cardiovascularTests',
                title: 'Kardiyovasküler Testler',
                subtitle: 'Kalp damar sistemi değerlendirmesi',
                type: 'assessment',
                info: 'Step test, koşu bandı ve kardiyovasküler kapasite',
                fields: [
                    {id: 'stepTest', label: 'Step Test Skoru', type: 'number', placeholder: '85'},
                    {id: 'recoveryHR', label: 'Toparlanma Nabzı (bpm)', type: 'number', placeholder: '120'},
                    {id: 'maxHR', label: 'Maksimum Nabız (bpm)', type: 'number', placeholder: '180'},
                    {id: 'vo2max', label: 'VO2 Max (ml/kg/dk)', type: 'number', step: '0.1', placeholder: '35.5'}
                ]
            },
            // Step 16: Clinical Assessment
            {
                id: 'clinicalAssessment',
                title: 'Klinik Değerlendirme',
                subtitle: 'Genel sağlık durumu ve öneriler',
                type: 'assessment',
                info: 'Hekim görüşü, risk faktörleri ve öneriler',
                fields: [
                    {id: 'overallRisk', label: 'Genel Risk Seviyesi', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'low', text: 'Düşük Risk'},
                        {value: 'moderate', text: 'Orta Risk'},
                        {value: 'high', text: 'Yüksek Risk'}
                    ]},
                    {id: 'fitnessLevel', label: 'Fitness Seviyesi', type: 'select', required: true, options: [
                        {value: '', text: 'Seçiniz'},
                        {value: 'excellent', text: 'Mükemmel'},
                        {value: 'good', text: 'İyi'},
                        {value: 'average', text: 'Ortalama'},
                        {value: 'poor', text: 'Zayıf'}
                    ]},
                    {id: 'recommendations', label: 'Öneriler ve Notlar', type: 'textarea', placeholder: 'Egzersiz önerileri, dikkat edilecek hususlar...', rows: 4}
                ]
            },
            // Step 17: Summary
            {
                id: 'summary',
                title: 'Değerlendirme Raporu',
                subtitle: 'Tüm sonuçların özeti',
                type: 'summary'
            }
        ];

        function initializeAssessment() {
            loadFromLocalStorage();
            showStep(0);
            updateProgressBar();
        }

        function showStep(stepIndex) {
            currentStep = stepIndex;
            const step = assessmentSteps[stepIndex];
            const content = document.getElementById('assessmentContent');
            
            content.className = 'card-content assessment-step';
            
            if (step.type === 'welcome') {
                content.innerHTML = `
                    <div class="welcome-screen">
                        <h1 class="welcome-title">${step.title}</h1>
                        <p class="welcome-subtitle">${step.subtitle}</p>
                        <button class="start-btn" onclick="nextStep()">Değerlendirmeyi Başlat</button>
                    </div>
                `;
            } else if (step.type === 'form' || step.type === 'assessment') {
                let fieldsHtml = '';
                step.fields.forEach(field => {
                    if (field.type === 'select') {
                        let optionsHtml = '';
                        field.options.forEach(option => {
                            optionsHtml += `<option value="${option.value}">${option.text}</option>`;
                        });
                        fieldsHtml += `
                            <div class="form-group">
                                <label${field.required ? ' class="required"' : ''}>${field.label}</label>
                                <select id="${field.id}"${field.required ? ' required' : ''}>
                                    ${optionsHtml}
                                </select>
                            </div>
                        `;
                    } else if (field.type === 'textarea') {
                        fieldsHtml += `
                            <div class="form-group">
                                <label>${field.label}</label>
                                <textarea id="${field.id}" placeholder="${field.placeholder || ''}" rows="${field.rows || 3}"></textarea>
                            </div>
                        `;
                    } else {
                        fieldsHtml += `
                            <div class="form-group">
                                <label${field.required ? ' class="required"' : ''}>${field.label}</label>
                                <input type="${field.type}" id="${field.id}" 
                                       placeholder="${field.placeholder || ''}"
                                       ${field.step ? `step="${field.step}"` : ''}
                                       ${field.required ? 'required' : ''}>
                            </div>
                        `;
                    }
                });

                content.innerHTML = `
                    <h2 class="card-title">${step.title}</h2>
                    <p class="card-subtitle">${step.subtitle}</p>
                    ${step.info ? `<div class="test-ranges">${step.info}</div>` : ''}
                    <div class="form-row">
                        ${fieldsHtml}
                    </div>
                `;
            } else if (step.type === 'summary') {
                content.innerHTML = generateSummaryReport();
            }

            updateNavigationButtons();
            updateProgressBar();
        }

        function generateSummaryReport() {
            // Perform all calculations automatically before generating summary
            performCalculations();
            
            return `
                <div class="report-section">
                    <h2 class="report-title">${assessmentData.fullName || 'Katılımcı'} - Medikal Fitness Raporu</h2>
                    
                    <div class="summary-grid">
                        <div class="summary-card">
                            <h3>Kişisel Bilgiler</h3>
                            <p><strong>Cinsiyet:</strong> ${assessmentData.gender === 'male' ? 'Erkek' : 'Kadın'}</p>
                            <p><strong>Yaş:</strong> ${assessmentData.age || 'Belirtilmemiş'}</p>
                            <p><strong>Boy:</strong> ${assessmentData.height || 'Belirtilmemiş'} cm</p>
                            <p><strong>Kilo:</strong> ${assessmentData.weight || 'Belirtilmemiş'} kg</p>
                        </div>

                        <div class="summary-card">
                            <h3>Temel Ölçümler</h3>
                            ${testResults.bmi ? `<p><strong>BMI:</strong> ${testResults.bmi.result} (${testResults.bmi.bmi.toFixed(1)})</p>` : ''}
                            ${testResults.bloodPressure ? `<p><strong>Tansiyon:</strong> ${testResults.bloodPressure.result}</p>` : ''}
                            ${testResults.pulse ? `<p><strong>Nabız:</strong> ${testResults.pulse.result}</p>` : ''}
                            ${testResults.bodyFat ? `<p><strong>Vücut Yağı:</strong> ${testResults.bodyFat.result}</p>` : ''}
                            ${testResults.whr ? `<p><strong>Bel/Kalça:</strong> ${testResults.whr.result}</p>` : ''}
                        </div>

                        <div class="summary-card">
                            <h3>Fonksiyonel Değerlendirme</h3>
                            ${testResults.respiratory ? `<p><strong>Solunum:</strong> ${testResults.respiratory.result}</p>` : ''}
                            ${testResults.balance ? `<p><strong>Denge:</strong> ${testResults.balance.result}</p>` : ''}
                            ${testResults.shoulderMobility ? `<p><strong>Omuz Mobilitesi:</strong> ${testResults.shoulderMobility.result}</p>` : ''}
                            ${testResults.trunkFlexibility ? `<p><strong>Esneklik:</strong> ${testResults.trunkFlexibility.result}</p>` : ''}
                        </div>

                        <div class="summary-card">
                            <h3>Postür Değerlendirmesi</h3>
                            ${testResults.staticPosture ? `<p><strong>Statik Postür:</strong> ${testResults.staticPosture.result}</p>` : ''}
                            ${testResults.dynamicPosture ? `<p><strong>Dinamik Postür:</strong> ${testResults.dynamicPosture.result}</p>` : ''}
                            ${testResults.posturalSyndromes ? `<p><strong>Postüral Sendromlar:</strong> ${testResults.posturalSyndromes.result}</p>` : ''}
                        </div>

                        <div class="summary-card">
                            <h3>Kuvvet ve Kondisyon</h3>
                            ${testResults.strengthTests ? `<p><strong>Kas Kuvveti:</strong> ${testResults.strengthTests.result}</p>` : ''}
                            ${testResults.cardiovascularTests ? `<p><strong>Kardiyovasküler:</strong> ${testResults.cardiovascularTests.result}</p>` : ''}
                        </div>

                        <div class="summary-card">
                            <h3>Klinik Değerlendirme</h3>
                            ${testResults.clinicalAssessment ? `<p><strong>Genel Durum:</strong> ${testResults.clinicalAssessment.result}</p>` : ''}
                        </div>
                    </div>

                    <div class="summary-actions">
                        <button class="calculate-btn" onclick="saveToLocalStorage()">Raporu Kaydet</button>
                        <button class="calculate-btn" onclick="printReport()">Raporu Yazdır</button>
                        <button class="calculate-btn" onclick="restartAssessment()">Yeni Değerlendirme</button>
                    </div>
                </div>
            `;
        }

        function saveToLocalStorage() {
            // Perform calculations before saving
            performCalculations();
            
            const reportData = {
                personalInfo: assessmentData,
                testResults: testResults,
                timestamp: new Date().toISOString(),
                version: '1.0'
            };
            
            localStorage.setItem('medicalFitnessReport', JSON.stringify(reportData));
            alert('Rapor başarıyla kaydedildi!');
        }

        function printReport() {
            window.print();
        }

        function restartAssessment() {
            if (confirm('Yeni bir değerlendirme başlatmak istediğinizden emin misiniz? Mevcut veriler kaybolacaktır.')) {
                assessmentData = {};
                testResults = {};
                currentStep = 0;
                showStep(0);
            }
        }

        function updateProgressBar() {
            const percentage = (currentStep / totalSteps) * 100;
            document.getElementById('stepCounter').textContent = `Adım ${currentStep} / ${totalSteps}`;
            document.getElementById('progressFillMain').style.width = percentage + '%';
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.disabled = currentStep === 0;
            
            if (currentStep === 0) {
                nextBtn.style.display = 'none';
            } else {
                nextBtn.style.display = 'block';
                if (currentStep === totalSteps) {
                    nextBtn.textContent = 'Raporu Gör';
                } else {
                    nextBtn.textContent = 'İleri';
                }
            }
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                if (validateCurrentStep()) {
                    saveCurrentStepData();
                    currentStep++;
                    showStep(currentStep);
                }
            } else {
                showSummary();
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function validateCurrentStep() {
            // Check required fields
            const requiredInputs = document.querySelectorAll('input[required], select[required]');
            for (let input of requiredInputs) {
                if (!input.value.trim()) {
                    alert(`Lütfen "${input.previousElementSibling.textContent.replace('*', '')}" alanını doldurun.`);
                    input.focus();
                    return false;
                }
            }

            return true;
        }

        function saveCurrentStepData() {
            const step = assessmentSteps[currentStep];
            if (step && step.fields) {
                step.fields.forEach(field => {
                    const element = document.getElementById(field.id);
                    if (element) {
                        assessmentData[field.id] = element.value;
                    }
                });
                
                // Save to localStorage
                localStorage.setItem('medicalFitnessData', JSON.stringify(assessmentData));
                localStorage.setItem('medicalFitnessResults', JSON.stringify(testResults));
            }
        }

        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('medicalFitnessData');
            const savedResults = localStorage.getItem('medicalFitnessResults');
            
            if (savedData) {
                assessmentData = JSON.parse(savedData);
            }
            
            if (savedResults) {
                testResults = JSON.parse(savedResults);
            }
        }

        function updateProgress() {
            // Keep for compatibility with existing calculate functions
            const completedTests = Object.keys(testResults).length;
            console.log(`Tests completed: ${completedTests}`);
        }

        function performCalculations() {
            // Automatically perform all medical calculations based on saved data
            
            // BMI Calculation
            if (assessmentData.height && assessmentData.weight) {
                const height = parseFloat(assessmentData.height) / 100; // convert to meters
                const weight = parseFloat(assessmentData.weight);
                const bmi = weight / (height * height);
                
                let result, className;
                if (bmi < 18.5) {
                    result = 'Zayıf - Kilo almanız önerilir';
                    className = 'result-normal';
                } else if (bmi < 25) {
                    result = 'Normal - İdeal kiloda';
                    className = 'result-excellent';
                } else if (bmi < 30) {
                    result = 'Fazla Kilolu - Kilo vermeniz önerilir';
                    className = 'result-good';
                } else {
                    result = 'Obez - Doktor kontrolü önerilir';
                    className = 'result-risky';
                }
                
                testResults.bmi = { height: assessmentData.height, weight: assessmentData.weight, bmi, result, status: className };
            }

            // Blood Pressure Calculation
            if (assessmentData.systolic && assessmentData.diastolic) {
                const systolic = parseInt(assessmentData.systolic);
                const diastolic = parseInt(assessmentData.diastolic);
                
                let result, className;
                if (systolic <= 120 && diastolic <= 80) {
                    result = 'Normal - Tansiyon değerleriniz ideal aralıkta';
                    className = 'result-excellent';
                } else if (systolic <= 140 && diastolic <= 90) {
                    result = '1. Seviye Hipertansiyon - Dikkat edilmesi gerekiyor';
                    className = 'result-good';
                } else if (systolic <= 160 && diastolic <= 100) {
                    result = '2. Seviye Hipertansiyon - Orta risk seviyesi';
                    className = 'result-normal';
                } else {
                    result = '3. Seviye Hipertansiyon - Yüksek risk, doktor kontrolü önerilir';
                    className = 'result-risky';
                }
                
                testResults.bloodPressure = { systolic, diastolic, result, status: className };
            }

            // Pulse Calculation
            if (assessmentData.pulse) {
                const pulse = parseInt(assessmentData.pulse);
                
                let result, className;
                if (pulse >= 46 && pulse <= 60) {
                    result = 'Çok İyi - Mükemmel kardiyovasküler kondisyon';
                    className = 'result-excellent';
                } else if (pulse >= 60 && pulse <= 80) {
                    result = 'Normal - Sağlıklı nabız değeri';
                    className = 'result-good';
                } else if (pulse >= 80 && pulse <= 100) {
                    result = 'Yüksek Normal - Takip edilmeli';
                    className = 'result-normal';
                } else {
                    result = 'Riskli - Doktor kontrolü önerilir';
                    className = 'result-risky';
                }
                
                testResults.pulse = { pulse, result, status: className };
            }

            // Body Fat Calculation
            if (assessmentData.bodyFat && assessmentData.gender) {
                const bodyFat = parseFloat(assessmentData.bodyFat);
                const gender = assessmentData.gender;
                
                let result, className;
                if (gender === 'male') {
                    if (bodyFat <= 12) {
                        result = 'Çok İyi - İdeal vücut yağ oranı';
                        className = 'result-excellent';
                    } else if (bodyFat <= 20) {
                        result = 'Normal - Sağlıklı aralık';
                        className = 'result-good';
                    } else if (bodyFat <= 25) {
                        result = 'Orta - Egzersiz önerilir';
                        className = 'result-normal';
                    } else {
                        result = 'Yüksek - Kilo verme programı gerekli';
                        className = 'result-risky';
                    }
                } else {
                    if (bodyFat <= 20) {
                        result = 'Çok İyi - İdeal vücut yağ oranı';
                        className = 'result-excellent';
                    } else if (bodyFat <= 31) {
                        result = 'Normal - Sağlıklı aralık';
                        className = 'result-good';
                    } else if (bodyFat <= 36) {
                        result = 'Orta - Egzersiz önerilir';
                        className = 'result-normal';
                    } else {
                        result = 'Yüksek - Kilo verme programı gerekli';
                        className = 'result-risky';
                    }
                }
                
                testResults.bodyFat = { bodyFat, result, status: className };
            }

            // Waist Hip Ratio Calculation
            if (assessmentData.waist && assessmentData.hip && assessmentData.gender) {
                const waist = parseFloat(assessmentData.waist);
                const hip = parseFloat(assessmentData.hip);
                const whr = waist / hip;
                const gender = assessmentData.gender;
                
                let result, className;
                if (gender === 'male') {
                    if (whr < 0.85) {
                        result = 'Çok İyi - Düşük sağlık riski';
                        className = 'result-excellent';
                    } else if (whr < 0.90) {
                        result = 'İyi - Orta sağlık riski';
                        className = 'result-good';
                    } else if (whr < 0.95) {
                        result = 'Orta - Yüksek sağlık riski';
                        className = 'result-normal';
                    } else {
                        result = 'Riskli - Çok yüksek sağlık riski';
                        className = 'result-risky';
                    }
                } else {
                    if (whr < 0.75) {
                        result = 'Çok İyi - Düşük sağlık riski';
                        className = 'result-excellent';
                    } else if (whr < 0.80) {
                        result = 'İyi - Orta sağlık riski';
                        className = 'result-good';
                    } else if (whr < 0.85) {
                        result = 'Orta - Yüksek sağlık riski';
                        className = 'result-normal';
                    } else {
                        result = 'Riskli - Çok yüksek sağlık riski';
                        className = 'result-risky';
                    }
                }
                
                testResults.whr = { waist, hip, whr, result, status: className };
            }

            // Add other calculations as needed based on available data
            // This function will be expanded with all other assessment calculations
            
            console.log('Automatic calculations completed:', testResults);
        }

        function calculateBloodPressure() {
            const systolic = parseInt(document.getElementById('systolic').value);
            const diastolic = parseInt(document.getElementById('diastolic').value);
            const resultDiv = document.getElementById('bpResult');

            if (!systolic || !diastolic) {
                alert('Lütfen tansiyon değerlerini giriniz');
                return;
            }

            let result, className;
            if (systolic <= 120 && diastolic <= 80) {
                result = 'Normal - Tansiyon değerleriniz ideal aralıkta';
                className = 'result-excellent';
            } else if (systolic <= 140 && diastolic <= 90) {
                result = '1. Seviye Hipertansiyon - Dikkat edilmesi gerekiyor';
                className = 'result-good';
            } else if (systolic <= 160 && diastolic <= 100) {
                result = '2. Seviye Hipertansiyon - Orta risk seviyesi';
                className = 'result-normal';
            } else {
                result = '3. Seviye Hipertansiyon - Yüksek risk, doktor kontrolü önerilir';
                className = 'result-risky';
            }

            testResults.bloodPressure = { systolic, diastolic, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculatePulse() {
            const pulse = parseInt(document.getElementById('pulse').value);
            const resultDiv = document.getElementById('pulseResult');

            if (!pulse) {
                alert('Lütfen nabız değerini giriniz');
                return;
            }

            let result, className;
            if (pulse >= 46 && pulse <= 60) {
                result = 'Çok İyi - Mükemmel kardiyovasküler kondisyon';
                className = 'result-excellent';
            } else if (pulse >= 60 && pulse <= 80) {
                result = 'Normal - Sağlıklı nabız değeri';
                className = 'result-good';
            } else if (pulse >= 85 && pulse <= 100) {
                result = 'Yüksek - Kondisyon geliştirme önerilir';
                className = 'result-normal';
            } else {
                result = 'Riskli - Doktor kontrolü önerilir';
                className = 'result-risky';
            }

            testResults.pulse = { pulse, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateBodyFat() {
            const bodyFat = parseFloat(document.getElementById('bodyFat').value);
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('bodyFatResult');

            if (!bodyFat || !gender) {
                alert('Lütfen vücut yağ oranı ve cinsiyet bilgilerini giriniz');
                return;
            }

            let result, className;
            
            if (gender === 'male') {
                if (bodyFat >= 8 && bodyFat <= 12) {
                    result = 'Çok İyi - Optimal yağ oranı';
                    className = 'result-excellent';
                } else if (bodyFat >= 13 && bodyFat <= 20) {
                    result = 'Normal - Sağlıklı aralık';
                    className = 'result-good';
                } else if (bodyFat > 20) {
                    result = 'Riskli - Yağ oranı yüksek, diyet ve egzersiz önerilir';
                    className = 'result-risky';
                } else {
                    result = 'Düşük - Çok az yağ oranı sağlık açısından riskli olabilir';
                    className = 'result-normal';
                }
            } else {
                if (bodyFat >= 14 && bodyFat <= 20) {
                    result = 'Çok İyi - Optimal yağ oranı';
                    className = 'result-excellent';
                } else if (bodyFat >= 21 && bodyFat <= 31) {
                    result = 'Normal - Sağlıklı aralık';
                    className = 'result-good';
                } else if (bodyFat > 31) {
                    result = 'Riskli - Yağ oranı yüksek, diyet ve egzersiz önerilir';
                    className = 'result-risky';
                } else {
                    result = 'Düşük - Çok az yağ oranı sağlık açısından riskli olabilir';
                    className = 'result-normal';
                }
            }

            testResults.bodyFat = { bodyFat, gender, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateWHR() {
            const waist = parseFloat(document.getElementById('waist').value);
            const hip = parseFloat(document.getElementById('hip').value);
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('whrResult');

            if (!waist || !hip || !gender) {
                alert('Lütfen bel, kalça ölçüleri ve cinsiyet bilgilerini giriniz');
                return;
            }

            const whr = (waist / hip).toFixed(2);
            let result, className;

            if (gender === 'male') {
                if (whr < 0.85) {
                    result = `Çok İyi (${whr}) - Düşük sağlık riski`;
                    className = 'result-excellent';
                } else if (whr >= 0.85 && whr <= 0.90) {
                    result = `İyi (${whr}) - Düşük-orta risk`;
                    className = 'result-good';
                } else if (whr > 0.90 && whr <= 0.95) {
                    result = `Orta Risk (${whr}) - Dikkat edilmeli`;
                    className = 'result-normal';
                } else {
                    result = `Riskli (${whr}) - Yüksek sağlık riski`;
                    className = 'result-risky';
                }
            } else {
                if (whr < 0.75) {
                    result = `Çok İyi (${whr}) - Düşük sağlık riski`;
                    className = 'result-excellent';
                } else if (whr >= 0.75 && whr <= 0.80) {
                    result = `İyi (${whr}) - Düşük-orta risk`;
                    className = 'result-good';
                } else if (whr > 0.80 && whr <= 0.85) {
                    result = `Orta Risk (${whr}) - Dikkat edilmeli`;
                    className = 'result-normal';
                } else {
                    result = `Riskli (${whr}) - Yüksek sağlık riski`;
                    className = 'result-risky';
                }
            }

            testResults.whr = { waist, hip, whr: parseFloat(whr), result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateBreathing() {
            const breathingPattern = document.getElementById('breathingPattern').value;
            const resultDiv = document.getElementById('breathingResult');

            if (!breathingPattern) {
                alert('Lütfen nefes kalitesini seçiniz');
                return;
            }

            let result, className;
            
            switch(breathingPattern) {
                case 'normal':
                    result = 'Normal - Sağlıklı nefes alıp verme';
                    className = 'result-excellent';
                    break;
                case 'dysfunction':
                    result = 'Nefes Disfonksiyonu - Nefes egzersizleri önerilir';
                    className = 'result-risky';
                    break;
                case 'weak_diaphragm':
                    result = 'Zayıf Diyafram - Diyafram güçlendirme egzersizleri gerekli';
                    className = 'result-normal';
                    break;
                case 'apical':
                    result = 'Apikal Nefes - Derin nefes teknikleri öğrenilmeli';
                    className = 'result-normal';
                    break;
            }

            testResults.breathing = { breathingPattern, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateFootAnalysis() {
            const leftFoot = parseFloat(document.getElementById('leftFoot').value);
            const rightFoot = parseFloat(document.getElementById('rightFoot').value);
            const resultDiv = document.getElementById('footResult');

            if (leftFoot === null || leftFoot === undefined || leftFoot === '' || 
                rightFoot === null || rightFoot === undefined || rightFoot === '') {
                alert('Lütfen her iki ayak için ölçüm değerlerini giriniz');
                return;
            }

            let leftResult, rightResult, overallResult, className;

            // Sol ayak değerlendirmesi
            if (leftFoot >= 0 && leftFoot <= 10) {
                leftResult = 'Normal';
            } else if (leftFoot > 10) {
                leftResult = 'Pronation';
            } else {
                leftResult = 'Supination';
            }

            // Sağ ayak değerlendirmesi  
            if (rightFoot >= 0 && rightFoot <= 10) {
                rightResult = 'Normal';
            } else if (rightFoot > 10) {
                rightResult = 'Pronation';
            } else {
                rightResult = 'Supination';
            }

            // Genel değerlendirme
            if (leftResult === 'Normal' && rightResult === 'Normal') {
                overallResult = 'İyi - Her iki ayak da normal aralıkta';
                className = 'result-excellent';
            } else if ((leftResult === 'Normal' || rightResult === 'Normal')) {
                overallResult = `Kısmen Normal - Sol: ${leftResult}, Sağ: ${rightResult}. Düzeltici egzersizler önerilir`;
                className = 'result-normal';
            } else {
                overallResult = `Risk Var - Sol: ${leftResult}, Sağ: ${rightResult}. Uzman değerlendirmesi gerekli`;
                className = 'result-risky';
            }

            testResults.footAnalysis = { leftFoot, rightFoot, leftResult, rightResult, result: overallResult, status: className };
            resultDiv.innerHTML = `${overallResult}<br><small>Sol: ${leftFoot}mm (${leftResult}), Sağ: ${rightFoot}mm (${rightResult})</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateBalance() {
            const balance = parseInt(document.getElementById('balance').value);
            const resultDiv = document.getElementById('balanceResult');

            if (!balance) {
                alert('Lütfen denge testi süresini giriniz');
                return;
            }

            let result, className;
            if (balance >= 60) {
                result = 'İyi - Mükemmel denge kontrolü';
                className = 'result-excellent';
            } else if (balance >= 29) {
                result = 'Normal - Yeterli denge kontrolü';
                className = 'result-good';
            } else {
                result = 'Zayıf - Denge egzersizleri önerilir';
                className = 'result-risky';
            }

            testResults.balance = { balance, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateShoulderMobility() {
            const shoulderMobility = parseFloat(document.getElementById('shoulderMobility').value);
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('shoulderResult');

            if (shoulderMobility === null || shoulderMobility === undefined || shoulderMobility === '' || !gender) {
                alert('Lütfen omuz mobility değeri ve cinsiyet bilgilerini giriniz');
                return;
            }

            let result, className;

            if (gender === 'male') {
                if (shoulderMobility >= 17) {
                    result = `İyi (${shoulderMobility}cm) - Mükemmel omuz mobility`;
                    className = 'result-excellent';
                } else if (shoulderMobility >= 0 && shoulderMobility <= 5) {
                    result = `Normal (${shoulderMobility}cm) - Yeterli mobility`;
                    className = 'result-good';
                } else if (shoulderMobility < -1) {
                    result = `Riskli (${shoulderMobility}cm) - Mobility egzersizleri şart`;
                    className = 'result-risky';
                } else {
                    result = `Orta (${shoulderMobility}cm) - Geliştirilebilir`;
                    className = 'result-normal';
                }
            } else {
                if (shoulderMobility >= 21) {
                    result = `İyi (${shoulderMobility}cm) - Mükemmel omuz mobility`;
                    className = 'result-excellent';
                } else if (shoulderMobility >= 1 && shoulderMobility <= 10) {
                    result = `Normal (${shoulderMobility}cm) - Yeterli mobility`;
                    className = 'result-good';
                } else if (shoulderMobility < 0) {
                    result = `Riskli (${shoulderMobility}cm) - Mobility egzersizleri şart`;
                    className = 'result-risky';
                } else {
                    result = `Orta (${shoulderMobility}cm) - Geliştirilebilir`;
                    className = 'result-normal';
                }
            }

            testResults.shoulderMobility = { shoulderMobility, gender, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateFlexibility() {
            const flexibility = parseFloat(document.getElementById('flexibility').value);
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('flexibilityResult');

            if (flexibility === null || flexibility === undefined || flexibility === '' || !gender) {
                alert('Lütfen esneklik değeri ve cinsiyet bilgilerini giriniz');
                return;
            }

            let result, className;

            if (gender === 'male') {
                if (flexibility >= 17) {
                    result = `İyi (${flexibility}cm) - Mükemmel esneklik`;
                    className = 'result-excellent';
                } else if (flexibility >= 0 && flexibility <= 5) {
                    result = `Normal (${flexibility}cm) - Yeterli esneklik`;
                    className = 'result-good';
                } else if (flexibility < -1) {
                    result = `Riskli (${flexibility}cm) - Esneklik egzersizleri şart`;
                    className = 'result-risky';
                } else {
                    result = `Orta (${flexibility}cm) - Geliştirilebilir`;
                    className = 'result-normal';
                }
            } else {
                if (flexibility >= 21) {
                    result = `İyi (${flexibility}cm) - Mükemmel esneklik`;
                    className = 'result-excellent';
                } else if (flexibility >= 1 && flexibility <= 10) {
                    result = `Normal (${flexibility}cm) - Yeterli esneklik`;
                    className = 'result-good';
                } else if (flexibility < 0) {
                    result = `Riskli (${flexibility}cm) - Esneklik egzersizleri şart`;
                    className = 'result-risky';
                } else {
                    result = `Orta (${flexibility}cm) - Geliştirilebilir`;
                    className = 'result-normal';
                }
            }

            testResults.flexibility = { flexibility, gender, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateStaticPosture() {
            const anteriorPosture = document.getElementById('anteriorPosture').value;
            const lateralPosture = document.getElementById('lateralPosture').value;
            const posteriorPosture = document.getElementById('posteriorPosture').value;
            const resultDiv = document.getElementById('staticPostureResult');

            if (!anteriorPosture || !lateralPosture || !posteriorPosture) {
                alert('Lütfen tüm postür değerlendirmelerini tamamlayınız');
                return;
            }

            let normalCount = 0;
            let deviationCount = 0;
            let severeCount = 0;

            [anteriorPosture, lateralPosture, posteriorPosture].forEach(posture => {
                if (posture === 'normal') normalCount++;
                else if (posture === 'deviation') deviationCount++;
                else if (posture === 'severe') severeCount++;
            });

            let result, className;

            if (normalCount === 3) {
                result = 'Mükemmel - Tüm açılardan normal postür';
                className = 'result-excellent';
            } else if (severeCount > 0) {
                result = 'Riskli - Ciddi postürel sapma tespit edildi, uzman değerlendirmesi gerekli';
                className = 'result-risky';
            } else if (deviationCount >= 2) {
                result = 'Orta Risk - Çoklu postürel sapma, düzeltici egzersizler önerilir';
                className = 'result-normal';
            } else {
                result = 'Kabul Edilebilir - Hafif sapma, iyileştirici egzersizler faydalı';
                className = 'result-good';
            }

            const detailText = `Anterior: ${getPostureText(anteriorPosture)}, Lateral: ${getPostureText(lateralPosture)}, Posterior: ${getPostureText(posteriorPosture)}`;

            testResults.staticPosture = { 
                anteriorPosture, 
                lateralPosture, 
                posteriorPosture, 
                result, 
                status: className 
            };
            
            resultDiv.innerHTML = `${result}<br><small>${detailText}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function getPostureText(posture) {
            switch(posture) {
                case 'normal': return 'Normal';
                case 'deviation': return 'Sapma Var';
                case 'severe': return 'Ciddi Sapma';
                default: return posture;
            }
        }

        function calculateDynamicPosture() {
            const leftSideSquat = document.getElementById('leftSideSquat').value;
            const rightSideSquat = document.getElementById('rightSideSquat').value;
            const resultDiv = document.getElementById('dynamicPostureResult');

            if (!leftSideSquat || !rightSideSquat) {
                alert('Lütfen her iki taraf için değerlendirme yapınız');
                return;
            }

            let result, className;

            if (leftSideSquat === 'normal' && rightSideSquat === 'normal') {
                result = 'Mükemmel - Her iki taraf da normal dinamik postür';
                className = 'result-excellent';
            } else if (leftSideSquat === 'limitation' || rightSideSquat === 'limitation') {
                result = 'Riskli - Ciddi kısıtlılık tespit edildi, uzman değerlendirmesi gerekli';
                className = 'result-risky';
            } else if (leftSideSquat === 'compensation' || rightSideSquat === 'compensation') {
                result = 'Orta Risk - Kompensasyon paternleri var, düzeltici egzersizler önerilir';
                className = 'result-normal';
            } else {
                result = 'İyi - Hafif asimetri, denge egzersizleri faydalı';
                className = 'result-good';
            }

            const detailText = `Sol: ${getDynamicPostureText(leftSideSquat)}, Sağ: ${getDynamicPostureText(rightSideSquat)}`;

            testResults.dynamicPosture = { 
                leftSideSquat, 
                rightSideSquat, 
                result, 
                status: className 
            };
            
            resultDiv.innerHTML = `${result}<br><small>${detailText}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function getDynamicPostureText(posture) {
            switch(posture) {
                case 'normal': return 'Normal';
                case 'compensation': return 'Kompensasyon Var';
                case 'limitation': return 'Ciddi Kısıtlılık';
                default: return posture;
            }
        }

        function calculatePosturalSyndrome() {
            const upperCrossed = document.getElementById('upperCrossed').value;
            const lowerCrossed = document.getElementById('lowerCrossed').value;
            const xLegs = document.getElementById('xLegs').value;
            const resultDiv = document.getElementById('posturalSyndromeResult');

            if (!upperCrossed || !lowerCrossed || !xLegs) {
                alert('Lütfen tüm sendrom değerlendirmelerini tamamlayınız');
                return;
            }

            let severityScore = 0;
            let syndromes = [];

            // Her sendrom için skor hesapla
            [upperCrossed, lowerCrossed, xLegs].forEach(syndrome => {
                switch(syndrome) {
                    case 'mild': severityScore += 1; break;
                    case 'moderate': severityScore += 2; break;
                    case 'severe': severityScore += 3; break;
                }
            });

            // Tespit edilen sendromları listele
            if (upperCrossed !== 'none') syndromes.push(`Upper Crossed: ${getSeverityText(upperCrossed)}`);
            if (lowerCrossed !== 'none') syndromes.push(`Lower Crossed: ${getSeverityText(lowerCrossed)}`);
            if (xLegs !== 'none') syndromes.push(`X-Legs: ${getSeverityText(xLegs)}`);

            let result, className;

            if (severityScore === 0) {
                result = 'Mükemmel - Postürel sendrom tespit edilmedi';
                className = 'result-excellent';
            } else if (severityScore <= 2) {
                result = 'İyi - Hafif postürel imbalans, koruyucu egzersizler önerilir';
                className = 'result-good';
            } else if (severityScore <= 4) {
                result = 'Orta Risk - Orta düzey postürel sendrom, düzenli egzersiz programı gerekli';
                className = 'result-normal';
            } else {
                result = 'Yüksek Risk - Ciddi postürel sendromlar, uzman değerlendirmesi ve özel program gerekli';
                className = 'result-risky';
            }

            const detailText = syndromes.length > 0 ? syndromes.join(', ') : 'Hiçbir sendrom tespit edilmedi';

            testResults.posturalSyndrome = { 
                upperCrossed, 
                lowerCrossed, 
                xLegs, 
                severityScore,
                result, 
                status: className 
            };
            
            resultDiv.innerHTML = `${result}<br><small>${detailText}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function getSeverityText(severity) {
            switch(severity) {
                case 'none': return 'Yok';
                case 'mild': return 'Hafif';
                case 'moderate': return 'Orta';
                case 'severe': return 'Ciddi';
                default: return severity;
            }
        }

        function calculatePushup() {
            const pushup = parseInt(document.getElementById('pushup').value);
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('pushupResult');

            if (!pushup || !gender) {
                alert('Lütfen push-up sayısı ve cinsiyet bilgilerini giriniz');
                return;
            }

            let result, className;

            if (gender === 'male') {
                if (pushup >= 20) {
                    result = `İyi (${pushup} tekrar) - Mükemmel üst vücut kuvveti`;
                    className = 'result-excellent';
                } else if (pushup >= 10) {
                    result = `Normal (${pushup} tekrar) - Yeterli kuvvet`;
                    className = 'result-good';
                } else {
                    result = `Zayıf (${pushup} tekrar) - Kuvvet antrenmanı gerekli`;
                    className = 'result-risky';
                }
            } else {
                if (pushup >= 14) {
                    result = `İyi (${pushup} tekrar) - Mükemmel üst vücut kuvveti`;
                    className = 'result-excellent';
                } else if (pushup >= 7) {
                    result = `Normal (${pushup} tekrar) - Yeterli kuvvet`;
                    className = 'result-good';
                } else {
                    result = `Zayıf (${pushup} tekrar) - Kuvvet antrenmanı gerekli`;
                    className = 'result-risky';
                }
            }

            testResults.pushup = { pushup, gender, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculatePlank() {
            const plank = parseInt(document.getElementById('plank').value);
            const resultDiv = document.getElementById('plankResult');

            if (!plank) {
                alert('Lütfen plank süresini giriniz');
                return;
            }

            let result, className;
            if (plank >= 120) {
                result = `İyi (${Math.floor(plank/60)}dk ${plank%60}sn) - Mükemmel core kuvveti`;
                className = 'result-excellent';
            } else if (plank >= 60) {
                result = `Normal (${Math.floor(plank/60)}dk ${plank%60}sn) - Yeterli core kuvveti`;
                className = 'result-good';
            } else {
                result = `Zayıf (${plank}sn) - Core kuvveti geliştirme gerekli`;
                className = 'result-risky';
            }

            testResults.plank = { plank, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateWallSit() {
            const wallSit = parseInt(document.getElementById('wallSit').value);
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('wallSitResult');

            if (!wallSit || !gender) {
                alert('Lütfen wall sit süresi ve cinsiyet bilgilerini giriniz');
                return;
            }

            let result, className;

            if (gender === 'male') {
                if (wallSit >= 120) {
                    result = `İyi (${Math.floor(wallSit/60)}dk ${wallSit%60}sn) - Mükemmel alt vücut kuvveti`;
                    className = 'result-excellent';
                } else if (wallSit >= 60) {
                    result = `Normal (${Math.floor(wallSit/60)}dk ${wallSit%60}sn) - Yeterli kuvvet`;
                    className = 'result-good';
                } else {
                    result = `Zayıf (${wallSit}sn) - Alt vücut kuvveti geliştirme gerekli`;
                    className = 'result-risky';
                }
            } else {
                if (wallSit >= 90) {
                    result = `İyi (${Math.floor(wallSit/60)}dk ${wallSit%60}sn) - Mükemmel alt vücut kuvveti`;
                    className = 'result-excellent';
                } else if (wallSit >= 14) {
                    result = `Normal (${wallSit}sn) - Yeterli kuvvet`;
                    className = 'result-good';
                } else {
                    result = `Zayıf (${wallSit}sn) - Alt vücut kuvveti geliştirme gerekli`;
                    className = 'result-risky';
                }
            }

            testResults.wallSit = { wallSit, gender, result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateKarvonen() {
            const targetIntensity = parseInt(document.getElementById('targetIntensity').value);
            const age = parseInt(document.getElementById('age').value);
            const restingHR = parseInt(document.getElementById('pulse').value);
            const resultDiv = document.getElementById('karvonenResult');

            if (!targetIntensity || !age) {
                alert('Lütfen yaş ve hedef yoğunluk bilgilerini giriniz. Dinlenik nabzınız girilmemişse önce nabız testini yapın.');
                return;
            }

            if (targetIntensity < 50 || targetIntensity > 85) {
                alert('Hedef yoğunluk 50-85% arasında olmalıdır');
                return;
            }

            // Maksimal kalp hızı hesaplama (220 - yaş)
            const maxHR = 220 - age;
            
            // Dinlenik nabız varsa kullan, yoksa varsayılan (70)
            const rhr = restingHR || 70;
            
            // Karvonen formülü: ((MaxHR - RestingHR) × %Yoğunluk) + RestingHR
            const targetHR = Math.round(((maxHR - rhr) * (targetIntensity / 100)) + rhr);
            
            // Antrenman zonları
            const zones = {
                fat_burn: Math.round(((maxHR - rhr) * 0.6) + rhr),
                aerobic: Math.round(((maxHR - rhr) * 0.7) + rhr),
                anaerobic: Math.round(((maxHR - rhr) * 0.8) + rhr)
            };

            let result = `
                <strong>%${targetIntensity} Yoğunluk: ${targetHR} bpm</strong><br>
                <small>
                    Yağ Yakma Zonu (60%): ${zones.fat_burn} bpm<br>
                    Aerobik Zon (70%): ${zones.aerobic} bpm<br>
                    Anaerobik Zon (80%): ${zones.anaerobic} bpm<br>
                    Maksimal Kalp Hızı: ${maxHR} bpm
                </small>
            `;

            testResults.karvonen = { 
                targetIntensity, 
                targetHR, 
                maxHR, 
                restingHR: rhr, 
                zones,
                result: `Hedef kalp hızı ${targetHR} bpm`,
                status: 'result-good' 
            };
            
            resultDiv.innerHTML = result;
            resultDiv.className = 'result-display result-good';
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateAerobic21() {
            const distance = parseInt(document.getElementById('aerobic21Distance').value);
            const age = parseInt(document.getElementById('age').value) || 25;
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('aerobic21Result');

            if (!distance) {
                alert('Lütfen 21 saniye test mesafesini giriniz');
                return;
            }

            // Basitleştirilmiş anaerobik güç hesaplama
            const speed = (distance / 21) * 3.6; // km/h
            let result, className;

            if (gender === 'male') {
                if (speed >= 20) {
                    result = `Mükemmel (${speed.toFixed(1)} km/h) - Yüksek anaerobik güç`;
                    className = 'result-excellent';
                } else if (speed >= 16) {
                    result = `İyi (${speed.toFixed(1)} km/h) - İyi anaerobik kondisyon`;
                    className = 'result-good';
                } else if (speed >= 12) {
                    result = `Orta (${speed.toFixed(1)} km/h) - Geliştirilebilir`;
                    className = 'result-normal';
                } else {
                    result = `Zayıf (${speed.toFixed(1)} km/h) - Anaerobik antrenman gerekli`;
                    className = 'result-risky';
                }
            } else {
                if (speed >= 16) {
                    result = `Mükemmel (${speed.toFixed(1)} km/h) - Yüksek anaerobik güç`;
                    className = 'result-excellent';
                } else if (speed >= 13) {
                    result = `İyi (${speed.toFixed(1)} km/h) - İyi anaerobik kondisyon`;
                    className = 'result-good';
                } else if (speed >= 10) {
                    result = `Orta (${speed.toFixed(1)} km/h) - Geliştirilebilir`;
                    className = 'result-normal';
                } else {
                    result = `Zayıf (${speed.toFixed(1)} km/h) - Anaerobik antrenman gerekli`;
                    className = 'result-risky';
                }
            }

            testResults.aerobic21 = { distance, speed: speed.toFixed(1), result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function calculateCooper() {
            const distance = parseInt(document.getElementById('cooperDistance').value);
            const age = parseInt(document.getElementById('age').value) || 25;
            const gender = document.getElementById('gender').value;
            const resultDiv = document.getElementById('cooperResult');

            if (!distance) {
                alert('Lütfen Cooper test mesafesini giriniz');
                return;
            }

            // Basitleştirilmiş VO2 Max hesaplama (Cooper formülü)
            const vo2Max = (distance - 504.9) / 44.73;
            
            let result, className;
            let fitnessLevel;

            if (gender === 'male') {
                if (vo2Max >= 50) {
                    fitnessLevel = 'Mükemmel';
                    className = 'result-excellent';
                } else if (vo2Max >= 42) {
                    fitnessLevel = 'İyi';
                    className = 'result-good';
                } else if (vo2Max >= 34) {
                    fitnessLevel = 'Orta';
                    className = 'result-normal';
                } else {
                    fitnessLevel = 'Zayıf';
                    className = 'result-risky';
                }
            } else {
                if (vo2Max >= 42) {
                    fitnessLevel = 'Mükemmel';
                    className = 'result-excellent';
                } else if (vo2Max >= 35) {
                    fitnessLevel = 'İyi';
                    className = 'result-good';
                } else if (vo2Max >= 28) {
                    fitnessLevel = 'Orta';
                    className = 'result-normal';
                } else {
                    fitnessLevel = 'Zayıf';
                    className = 'result-risky';
                }
            }

            result = `${fitnessLevel} (${distance}m - VO2 Max: ${vo2Max.toFixed(1)})`;
            
            testResults.cooper = { distance, vo2Max: vo2Max.toFixed(1), result, status: className };
            resultDiv.innerHTML = result;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function generateReport() {
            const fullName = document.getElementById('fullName').value || 'Belirtilmemiş';
            const age = document.getElementById('age').value || 'Belirtilmemiş';
            const height = document.getElementById('height').value || 'Belirtilmemiş';
            const weight = document.getElementById('weight').value || 'Belirtilmemiş';
            const gender = document.getElementById('gender').value === 'male' ? 'Erkek' : 
                          document.getElementById('gender').value === 'female' ? 'Kadın' : 'Belirtilmemiş';
            const trainer = document.getElementById('trainer').value || 'Belirtilmemiş';

            let reportHTML = `
                <div style="background: white; padding: 25px; border-radius: 15px; margin: 15px 0;">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">🏥 Kişisel Bilgiler</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <p><strong>İsim:</strong> ${fullName}</p>
                        <p><strong>Yaş:</strong> ${age}</p>
                        <p><strong>Cinsiyet:</strong> ${gender}</p>
                        <p><strong>Boy:</strong> ${height} cm</p>
                        <p><strong>Kilo:</strong> ${weight} kg</p>
                        <p><strong>Trainer:</strong> ${trainer}</p>
                    </div>
                </div>

                <div style="background: white; padding: 25px; border-radius: 15px; margin: 15px 0;">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">📊 Test Sonuçları</h3>
            `;

            let excellentCount = 0;
            let goodCount = 0;
            let normalCount = 0;
            let riskyCount = 0;
            let totalTests = 0;

            // Test sonuçlarını raporla
            for (const [testName, testData] of Object.entries(testResults)) {
                totalTests++;
                const testTitle = {
                    'bloodPressure': 'Tansiyon',
                    'pulse': 'Nabız',
                    'bodyFat': 'Vücut Yağ Oranı',
                    'whr': 'Bel/Kalça Oranı',
                    'breathing': 'Solunum Fonksiyonu',
                    'footAnalysis': 'Ayak Analizi',
                    'shoulderMobility': 'Omuz Mobility',
                    'balance': 'Denge Testi',
                    'flexibility': 'Esneklik',
                    'staticPosture': 'Statik Postür',
                    'dynamicPosture': 'Dinamik Postür',
                    'posturalSyndrome': 'Postürel Sendrom',
                    'pushup': 'Push-up',
                    'plank': 'Plank',
                    'wallSit': 'Wall Sit',
                    'karvonen': 'Hedef Kalp Hızı',
                    'aerobic21': '21sn Aerobik Test',
                    'cooper': 'Cooper Test',
                    'clinicalAssessment': 'Klinik Değerlendirme'
                }[testName] || testName;

                reportHTML += `
                    <div style="margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #4facfe;">
                        <strong>${testTitle}:</strong> <span class="${testData.status}">${testData.result}</span>
                    </div>
                `;

                // Skor sayacını güncelle
                if (testData.status.includes('excellent')) excellentCount++;
                else if (testData.status.includes('good')) goodCount++;
                else if (testData.status.includes('normal')) normalCount++;
                else if (testData.status.includes('risky')) riskyCount++;
            }

            reportHTML += `</div>`;

            // Genel değerlendirme
            if (totalTests > 0) {
                const excellentPercent = Math.round((excellentCount / totalTests) * 100);
                const goodPercent = Math.round((goodCount / totalTests) * 100);
                const normalPercent = Math.round((normalCount / totalTests) * 100);
                const riskyPercent = Math.round((riskyCount / totalTests) * 100);

                reportHTML += `
                    <div style="background: white; padding: 25px; border-radius: 15px; margin: 15px 0;">
                        <h3 style="color: #2c3e50; margin-bottom: 20px;">🎯 Genel Değerlendirme</h3>
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span>Mükemmel: ${excellentCount} test (${excellentPercent}%)</span>
                                <div style="flex: 1; margin-left: 15px; background: #e0e6ed; border-radius: 10px; height: 10px;">
                                    <div style="background: #28a745; height: 100%; border-radius: 10px; width: ${excellentPercent}%;"></div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span>İyi: ${goodCount} test (${goodPercent}%)</span>
                                <div style="flex: 1; margin-left: 15px; background: #e0e6ed; border-radius: 10px; height: 10px;">
                                    <div style="background: #17a2b8; height: 100%; border-radius: 10px; width: ${goodPercent}%;"></div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span>Normal: ${normalCount} test (${normalPercent}%)</span>
                                <div style="flex: 1; margin-left: 15px; background: #e0e6ed; border-radius: 10px; height: 10px;">
                                    <div style="background: #ffc107; height: 100%; border-radius: 10px; width: ${normalPercent}%;"></div>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <span>Riskli: ${riskyCount} test (${riskyPercent}%)</span>
                                <div style="flex: 1; margin-left: 15px; background: #e0e6ed; border-radius: 10px; height: 10px;">
                                    <div style="background: #dc3545; height: 100%; border-radius: 10px; width: ${riskyPercent}%;"></div>
                                </div>
                            </div>
                        </div>

                        <h4 style="color: #2c3e50; margin: 20px 0 15px 0;">🎯 Öneriler</h4>
                `;

                // Detaylı öneriler
                let specificRecommendations = [];
                
                // Test kategorilerine göre özel öneriler
                if (testResults.breathing && testResults.breathing.status.includes('risky')) {
                    specificRecommendations.push('Nefes egzersizleri ve diyafram güçlendirme');
                }
                if (testResults.footAnalysis && testResults.footAnalysis.status.includes('risky')) {
                    specificRecommendations.push('Ayak ortez değerlendirmesi ve düzeltici egzersizler');
                }
                if (testResults.posturalSyndrome && testResults.posturalSyndrome.status.includes('risky')) {
                    specificRecommendations.push('Postürel rehabilitasyon ve kas dengeleme egzersizleri');
                }
                if (testResults.staticPosture && testResults.staticPosture.status.includes('risky')) {
                    specificRecommendations.push('Postür düzeltme egzersizleri ve ergonomik değerlendirme');
                }
                if (testResults.shoulderMobility && testResults.shoulderMobility.status.includes('risky')) {
                    specificRecommendations.push('Omuz mobility egzersizleri ve stretching programı');
                }

                // Genel öneriler
                if (riskyCount > 0) {
                    reportHTML += '<p style="color: #721c24; background: #f8d7da; padding: 10px; border-radius: 5px; margin-bottom: 10px;"><strong>Öncelikli:</strong> Riskli kategorideki testler için uzman desteği alınması ve hedefli antrenman programı uygulanması önerilir.</p>';
                }
                
                if (specificRecommendations.length > 0) {
                    reportHTML += `<p style="color: #721c24; background: #f8d7da; padding: 10px; border-radius: 5px; margin-bottom: 10px;"><strong>Özel Öneriler:</strong><br>• ${specificRecommendations.join('<br>• ')}</p>`;
                }
                
                if (normalCount > 0) {
                    reportHTML += '<p style="color: #856404; background: #fff3cd; padding: 10px; border-radius: 5px; margin-bottom: 10px;"><strong>Geliştirme:</strong> Normal kategorideki testlerdeki performansı artırmak için düzenli egzersiz programına odaklanılmalı.</p>';
                }

                if (excellentCount + goodCount > totalTests * 0.7) {
                    reportHTML += '<p style="color: #155724; background: #d4edda; padding: 10px; border-radius: 5px; margin-bottom: 10px;"><strong>Tebrikler!</strong> Genel fitness seviyeniz oldukça iyi. Mevcut performansı korumak için düzenli antrenman devam etmelidir.</p>';
                }

                reportHTML += '</div>';
            } else {
                reportHTML += '<p style="text-align: center; color: #7f8c8d;">Henüz test sonucu bulunmuyor. Testleri tamamlayarak raporunuzu görüntüleyebilirsiniz.</p>';
            }

            // Tarih ekle
            const currentDate = new Date().toLocaleDateString('tr-TR');
            reportHTML += `
                <div style="text-align: center; margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <p style="color: #6c757d;"><strong>Rapor Tarihi:</strong> ${currentDate}</p>
                    <p style="color: #6c757d; font-size: 0.9em;">Bu rapor sadece fitness değerlendirmesi amaçlıdır. Sağlık sorunları için doktor kontrolü önerilir.</p>
                </div>
            `;

            document.getElementById('overallReport').innerHTML = reportHTML;
        }

        function exportToPDF() {
            // Basit bir PDF export simülasyonu
            // Gerçek uygulamada jsPDF veya benzer kütüphane kullanılabilir
            alert('PDF export özelliği aktif hale getirildi! Tarayıcınızın yazdır özelliğini kullanarak PDF olarak kaydedin.\n\nCtrl+P (Windows) veya Cmd+P (Mac) tuşlarını kullanabilirsiniz.');
            
            // Print dialog açma
            window.print();
        }

        function calculateClinicalAssessment() {
            const medicalFitness = document.getElementById('medicalFitness').value;
            const personalTraining = document.getElementById('personalTraining').value;
            const groupFitness = document.getElementById('groupFitness').value;
            const clinicalNotes = document.getElementById('clinicalNotes').value;
            const resultDiv = document.getElementById('clinicalResult');

            if (!medicalFitness || !personalTraining || !groupFitness) {
                alert('Lütfen tüm klinik değerlendirme alanlarını doldurunuz');
                return;
            }

            let overallRisk = 0;
            let recommendations = [];

            // Risk skoru hesaplama
            const assessments = { medicalFitness, personalTraining, groupFitness };
            Object.values(assessments).forEach(assessment => {
                switch(assessment) {
                    case 'suitable': 
                    case 'all': 
                        overallRisk += 0; 
                        break;
                    case 'conditional':
                    case 'supervised':
                    case 'low_impact':
                        overallRisk += 1;
                        break;
                    case 'restricted':
                    case 'modified':
                    case 'specific':
                        overallRisk += 2;
                        break;
                    case 'unsuitable':
                        overallRisk += 3;
                        break;
                }
            });

            let result, className;

            if (overallRisk === 0) {
                result = 'Tam Uygunluk - Tüm fitness aktiviteleri için uygun';
                className = 'result-excellent';
                recommendations.push('Hedeflerinize uygun bir program başlayabilirsiniz');
            } else if (overallRisk <= 2) {
                result = 'Koşullu Uygunluk - Hafif kısıtlamalar ile uygun';
                className = 'result-good';
                recommendations.push('Uzman gözetiminde program önerilir');
            } else if (overallRisk <= 4) {
                result = 'Kısıtlı Uygunluk - Özel program gerekli';
                className = 'result-normal';
                recommendations.push('Modifiye edilmiş program ve sürekli takip gerekli');
            } else {
                result = 'Yüksek Risk - Kapsamlı değerlendirme gerekli';
                className = 'result-risky';
                recommendations.push('Doktor onayı ve özel rehabilitasyon programı önerilir');
            }

            // Özel öneriler
            if (personalTraining === 'supervised') recommendations.push('Personal trainer eşliğinde antrenman');
            if (groupFitness === 'low_impact') recommendations.push('Sadece düşük etkili grup aktiviteleri');
            if (clinicalNotes.trim()) recommendations.push('Özel notlar dikkate alınmalı');

            const details = `
                Medikal Fitness: ${getAssessmentText(medicalFitness)}<br>
                Personal Training: ${getAssessmentText(personalTraining)}<br>
                Grup Fitness: ${getAssessmentText(groupFitness)}
                ${recommendations.length > 0 ? '<br><strong>Öneriler:</strong><br>• ' + recommendations.join('<br>• ') : ''}
            `;

            testResults.clinicalAssessment = { 
                medicalFitness, 
                personalTraining, 
                groupFitness, 
                clinicalNotes,
                overallRisk,
                result, 
                status: className 
            };
            
            resultDiv.innerHTML = `${result}<br><small>${details}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
            updateProgress();
        }

        function getAssessmentText(assessment) {
            switch(assessment) {
                case 'suitable': return 'Uygun';
                case 'conditional': return 'Koşullu Uygun';
                case 'restricted': return 'Kısıtlı';
                case 'unsuitable': return 'Uygun Değil';
                case 'supervised': return 'Gözetimli';
                case 'modified': return 'Modifiye Program';
                case 'all': return 'Tüm Aktiviteler';
                case 'low_impact': return 'Düşük Etki';
                case 'specific': return 'Belirli Aktiviteler';
                default: return assessment;
            }
        }

        // Missing calculation functions for new assessments
        function calculateRespiratory() {
            const peakFlow = parseFloat(document.getElementById('peakFlow').value);
            const breathHold = parseFloat(document.getElementById('breathHold').value);
            const resultDiv = document.getElementById('respiratoryResult');

            if (!peakFlow || !breathHold) {
                alert('Lütfen tüm solunum fonksionu değerlerini giriniz');
                return;
            }

            const gender = assessmentData.gender || 'male';
            const age = assessmentData.age || 30;

            let peakFlowScore = 0;
            let breathHoldScore = 0;

            // Peak Flow değerlendirmesi (yaş ve cinsiyete göre)
            let expectedPeakFlow;
            if (gender === 'male') {
                expectedPeakFlow = 600 - (age * 3.5);
            } else {
                expectedPeakFlow = 450 - (age * 2.5);
            }

            const peakFlowPercent = (peakFlow / expectedPeakFlow) * 100;
            if (peakFlowPercent >= 90) peakFlowScore = 4;
            else if (peakFlowPercent >= 80) peakFlowScore = 3;
            else if (peakFlowPercent >= 70) peakFlowScore = 2;
            else peakFlowScore = 1;

            // Nefes tutma değerlendirmesi
            if (breathHold >= 60) breathHoldScore = 4;
            else if (breathHold >= 45) breathHoldScore = 3;
            else if (breathHold >= 30) breathHoldScore = 2;
            else breathHoldScore = 1;

            const totalScore = (peakFlowScore + breathHoldScore) / 2;
            let result, className;

            if (totalScore >= 3.5) {
                result = 'Mükemmel Solunum Kapasitesi';
                className = 'result-excellent';
            } else if (totalScore >= 2.5) {
                result = 'İyi Solunum Kapasitesi';
                className = 'result-good';
            } else if (totalScore >= 1.5) {
                result = 'Orta Solunum Kapasitesi';
                className = 'result-normal';
            } else {
                result = 'Zayıf Solunum Kapasitesi - Geliştirilmeli';
                className = 'result-risky';
            }

            testResults.respiratory = { peakFlow, breathHold, score: totalScore, result, status: className };
            
            resultDiv.innerHTML = `${result}<br><small>Peak Flow: ${peakFlow} L/dk (${peakFlowPercent.toFixed(0)}%)<br>Nefes Tutma: ${breathHold} saniye</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
        }

        function calculateTrunkFlexibility() {
            const sitReach = parseFloat(document.getElementById('sitReach').value);
            const spinalFlexion = parseFloat(document.getElementById('spinalFlexion').value);
            const spinalExtension = parseFloat(document.getElementById('spinalExtension').value);
            const resultDiv = document.getElementById('trunkFlexibilityResult');

            if (sitReach === undefined || spinalFlexion === undefined || spinalExtension === undefined) {
                alert('Lütfen tüm gövde esnekliği değerlerini giriniz');
                return;
            }

            const gender = assessmentData.gender || 'male';
            let flexibilityScore = 0;

            // Otur-eriş testi değerlendirmesi
            let sitReachScore;
            if (gender === 'male') {
                if (sitReach >= 20) sitReachScore = 4;
                else if (sitReach >= 15) sitReachScore = 3;
                else if (sitReach >= 10) sitReachScore = 2;
                else sitReachScore = 1;
            } else {
                if (sitReach >= 25) sitReachScore = 4;
                else if (sitReach >= 20) sitReachScore = 3;
                else if (sitReach >= 15) sitReachScore = 2;
                else sitReachScore = 1;
            }

            // Spinal mobilite değerlendirmesi
            let spinalScore = 0;
            if (spinalFlexion >= 60 && spinalExtension >= 25) spinalScore = 4;
            else if (spinalFlexion >= 45 && spinalExtension >= 20) spinalScore = 3;
            else if (spinalFlexion >= 30 && spinalExtension >= 15) spinalScore = 2;
            else spinalScore = 1;

            flexibilityScore = (sitReachScore + spinalScore) / 2;
            let result, className;

            if (flexibilityScore >= 3.5) {
                result = 'Mükemmel Esneklik';
                className = 'result-excellent';
            } else if (flexibilityScore >= 2.5) {
                result = 'İyi Esneklik';
                className = 'result-good';
            } else if (flexibilityScore >= 1.5) {
                result = 'Orta Esneklik';
                className = 'result-normal';
            } else {
                result = 'Zayıf Esneklik - Esnetme Egzersizleri Gerekli';
                className = 'result-risky';
            }

            testResults.trunkFlexibility = { sitReach, spinalFlexion, spinalExtension, score: flexibilityScore, result, status: className };
            
            resultDiv.innerHTML = `${result}<br><small>Otur-Eriş: ${sitReach} cm<br>Fleksiyon: ${spinalFlexion}°, Ekstansiyon: ${spinalExtension}°</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
        }

        function calculateStaticPosture() {
            const headPosture = document.getElementById('headPosture').value;
            const shoulderLevel = document.getElementById('shoulderLevel').value;
            const spinalCurvature = document.getElementById('spinalCurvature').value;
            const resultDiv = document.getElementById('staticPostureResult');

            if (!headPosture || !shoulderLevel || !spinalCurvature) {
                alert('Lütfen tüm statik postür değerlendirmelerini yapınız');
                return;
            }

            let postureScore = 0;
            const issues = [];

            // Baş postürü değerlendirmesi
            if (headPosture === 'normal') postureScore += 2;
            else if (headPosture === 'forward') {
                postureScore += 1;
                issues.push('Forward Head Posture');
            } else {
                postureScore += 1;
                issues.push('Backward Head Posture');
            }

            // Omuz seviyesi değerlendirmesi
            if (shoulderLevel === 'level') postureScore += 2;
            else {
                postureScore += 0;
                issues.push('Omuz Asimetrisi');
            }

            // Spinal eğrilik değerlendirmesi
            if (spinalCurvature === 'normal') postureScore += 2;
            else {
                postureScore += 0;
                issues.push(`Spinal Deformite: ${spinalCurvature}`);
            }

            let result, className;

            if (postureScore === 6) {
                result = 'Mükemmel Postür';
                className = 'result-excellent';
            } else if (postureScore >= 4) {
                result = 'İyi Postür - Hafif Düzeltme Gerekli';
                className = 'result-good';
            } else if (postureScore >= 2) {
                result = 'Orta Dereceli Postür Problemi';
                className = 'result-normal';
            } else {
                result = 'Ciddi Postür Problemi - Müdahale Gerekli';
                className = 'result-risky';
            }

            testResults.staticPosture = { headPosture, shoulderLevel, spinalCurvature, score: postureScore, issues, result, status: className };
            
            const issuesText = issues.length > 0 ? '<br>Tespit edilen: ' + issues.join(', ') : '';
            resultDiv.innerHTML = `${result}<br><small>Skor: ${postureScore}/6${issuesText}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
        }

        function calculateDynamicPosture() {
            const walkingPosture = document.getElementById('walkingPosture').value;
            const functionalMovement = document.getElementById('functionalMovement').value;
            const resultDiv = document.getElementById('dynamicPostureResult');

            if (!walkingPosture || !functionalMovement) {
                alert('Lütfen dinamik postür değerlendirmelerini tamamlayınız');
                return;
            }

            let movementScore = 0;
            const observations = [];

            // Yürüyüş postürü değerlendirmesi
            if (walkingPosture === 'normal') {
                movementScore += 3;
            } else if (walkingPosture === 'abnormal') {
                movementScore += 1;
                observations.push('Anormal yürüyüş paterni');
            } else {
                movementScore += 0;
                observations.push('Kompensatuar hareket paterni');
            }

            // Fonksiyonel hareket değerlendirmesi
            if (functionalMovement === 'excellent') {
                movementScore += 3;
            } else if (functionalMovement === 'good') {
                movementScore += 2;
            } else {
                movementScore += 1;
                observations.push('Fonksiyonel hareket kapasitesi geliştirilmeli');
            }

            let result, className;

            if (movementScore >= 5) {
                result = 'Mükemmel Hareket Kalitesi';
                className = 'result-excellent';
            } else if (movementScore >= 3) {
                result = 'İyi Hareket Kalitesi';
                className = 'result-good';
            } else if (movementScore >= 1) {
                result = 'Orta Hareket Kalitesi';
                className = 'result-normal';
            } else {
                result = 'Zayıf Hareket Kalitesi - Düzeltme Gerekli';
                className = 'result-risky';
            }

            testResults.dynamicPosture = { walkingPosture, functionalMovement, score: movementScore, observations, result, status: className };
            
            const observationsText = observations.length > 0 ? '<br>Gözlemler: ' + observations.join(', ') : '';
            resultDiv.innerHTML = `${result}<br><small>Skor: ${movementScore}/6${observationsText}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
        }

        function calculatePosturalSyndromes() {
            const upperCross = document.getElementById('upperCross').value;
            const lowerCross = document.getElementById('lowerCross').value;
            const otherSyndromes = document.getElementById('otherSyndromes').value;
            const resultDiv = document.getElementById('posturalSyndromesResult');

            if (!upperCross || !lowerCross) {
                alert('Lütfen postüral sendrom değerlendirmelerini yapınız');
                return;
            }

            let syndromeScore = 0;
            const syndromes = [];

            // Upper Cross Syndrome değerlendirmesi
            if (upperCross === 'none') {
                syndromeScore += 3;
            } else if (upperCross === 'mild') {
                syndromeScore += 2;
                syndromes.push('Hafif Upper Cross Sendromu');
            } else if (upperCross === 'moderate') {
                syndromeScore += 1;
                syndromes.push('Orta Upper Cross Sendromu');
            } else {
                syndromeScore += 0;
                syndromes.push('Şiddetli Upper Cross Sendromu');
            }

            // Lower Cross Syndrome değerlendirmesi
            if (lowerCross === 'none') {
                syndromeScore += 3;
            } else if (lowerCross === 'mild') {
                syndromeScore += 2;
                syndromes.push('Hafif Lower Cross Sendromu');
            } else if (lowerCross === 'moderate') {
                syndromeScore += 1;
                syndromes.push('Orta Lower Cross Sendromu');
            } else {
                syndromeScore += 0;
                syndromes.push('Şiddetli Lower Cross Sendromu');
            }

            // Diğer sendromlar
            if (otherSyndromes.trim()) {
                syndromes.push('Diğer: ' + otherSyndromes);
            }

            let result, className;

            if (syndromeScore === 6) {
                result = 'Postüral Sendrom Yok';
                className = 'result-excellent';
            } else if (syndromeScore >= 4) {
                result = 'Hafif Postüral Sendromlar';
                className = 'result-good';
            } else if (syndromeScore >= 2) {
                result = 'Orta Dereceli Postüral Sendromlar';
                className = 'result-normal';
            } else {
                result = 'Ciddi Postüral Sendromlar - Tedavi Gerekli';
                className = 'result-risky';
            }

            testResults.posturalSyndromes = { upperCross, lowerCross, otherSyndromes, score: syndromeScore, syndromes, result, status: className };
            
            const syndromesText = syndromes.length > 0 ? '<br>Tespit edilen: ' + syndromes.join(', ') : '';
            resultDiv.innerHTML = `${result}<br><small>Skor: ${syndromeScore}/6${syndromesText}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
        }

        function calculateStrengthTests() {
            const gripStrength = parseFloat(document.getElementById('gripStrength').value);
            const pushUps = parseInt(document.getElementById('pushUps').value);
            const plankTime = parseInt(document.getElementById('plankTime').value);
            const squats = parseInt(document.getElementById('squats').value);
            const resultDiv = document.getElementById('strengthTestsResult');

            if (!gripStrength || !pushUps || !plankTime || !squats) {
                alert('Lütfen tüm kuvvet testi değerlerini giriniz');
                return;
            }

            const gender = assessmentData.gender || 'male';
            const age = assessmentData.age || 30;
            let totalScore = 0;

            // El kavrama kuvveti değerlendirmesi
            let gripScore;
            if (gender === 'male') {
                if (gripStrength >= 40) gripScore = 4;
                else if (gripStrength >= 35) gripScore = 3;
                else if (gripStrength >= 25) gripScore = 2;
                else gripScore = 1;
            } else {
                if (gripStrength >= 25) gripScore = 4;
                else if (gripStrength >= 20) gripScore = 3;
                else if (gripStrength >= 15) gripScore = 2;
                else gripScore = 1;
            }

            // Şınav değerlendirmesi
            let pushUpScore;
            if (gender === 'male') {
                if (pushUps >= 25) pushUpScore = 4;
                else if (pushUps >= 20) pushUpScore = 3;
                else if (pushUps >= 15) pushUpScore = 2;
                else pushUpScore = 1;
            } else {
                if (pushUps >= 15) pushUpScore = 4;
                else if (pushUps >= 12) pushUpScore = 3;
                else if (pushUps >= 8) pushUpScore = 2;
                else pushUpScore = 1;
            }

            // Plank değerlendirmesi
            let plankScore;
            if (plankTime >= 120) plankScore = 4;
            else if (plankTime >= 90) plankScore = 3;
            else if (plankTime >= 60) plankScore = 2;
            else plankScore = 1;

            // Squat değerlendirmesi
            let squatScore;
            if (squats >= 30) squatScore = 4;
            else if (squats >= 25) squatScore = 3;
            else if (squats >= 20) squatScore = 2;
            else squatScore = 1;

            totalScore = (gripScore + pushUpScore + plankScore + squatScore) / 4;
            let result, className;

            if (totalScore >= 3.5) {
                result = 'Mükemmel Kas Kuvveti';
                className = 'result-excellent';
            } else if (totalScore >= 2.5) {
                result = 'İyi Kas Kuvveti';
                className = 'result-good';
            } else if (totalScore >= 1.5) {
                result = 'Orta Kas Kuvveti';
                className = 'result-normal';
            } else {
                result = 'Zayıf Kas Kuvveti - Kuvvet Antrenmanı Gerekli';
                className = 'result-risky';
            }

            testResults.strengthTests = { gripStrength, pushUps, plankTime, squats, score: totalScore, result, status: className };
            
            resultDiv.innerHTML = `${result}<br><small>Kavrama: ${gripStrength}kg, Şınav: ${pushUps}, Plank: ${plankTime}s, Squat: ${squats}</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
        }

        function calculateCardiovascularTests() {
            const stepTest = parseFloat(document.getElementById('stepTest').value);
            const recoveryHR = parseInt(document.getElementById('recoveryHR').value);
            const maxHR = parseInt(document.getElementById('maxHR').value);
            const vo2max = parseFloat(document.getElementById('vo2max').value);
            const resultDiv = document.getElementById('cardiovascularTestsResult');

            if (!stepTest || !recoveryHR || !maxHR || !vo2max) {
                alert('Lütfen tüm kardiyovasküler test değerlerini giriniz');
                return;
            }

            const age = assessmentData.age || 30;
            let cardioScore = 0;

            // Step test değerlendirmesi
            let stepScore;
            if (stepTest >= 90) stepScore = 4;
            else if (stepTest >= 80) stepScore = 3;
            else if (stepTest >= 70) stepScore = 2;
            else stepScore = 1;

            // Toparlanma nabzı değerlendirmesi
            let recoveryScore;
            if (recoveryHR <= 100) recoveryScore = 4;
            else if (recoveryHR <= 120) recoveryScore = 3;
            else if (recoveryHR <= 140) recoveryScore = 2;
            else recoveryScore = 1;

            // VO2 Max değerlendirmesi (yaş ve cinsiyete göre)
            const gender = assessmentData.gender || 'male';
            let vo2Score;
            
            let excellentVO2, goodVO2, averageVO2;
            if (gender === 'male') {
                excellentVO2 = 50 - (age * 0.5);
                goodVO2 = 40 - (age * 0.4);
                averageVO2 = 30 - (age * 0.3);
            } else {
                excellentVO2 = 45 - (age * 0.4);
                goodVO2 = 35 - (age * 0.3);
                averageVO2 = 25 - (age * 0.2);
            }

            if (vo2max >= excellentVO2) vo2Score = 4;
            else if (vo2max >= goodVO2) vo2Score = 3;
            else if (vo2max >= averageVO2) vo2Score = 2;
            else vo2Score = 1;

            cardioScore = (stepScore + recoveryScore + vo2Score) / 3;
            let result, className;

            if (cardioScore >= 3.5) {
                result = 'Mükemmel Kardiyovasküler Kondisyon';
                className = 'result-excellent';
            } else if (cardioScore >= 2.5) {
                result = 'İyi Kardiyovasküler Kondisyon';
                className = 'result-good';
            } else if (cardioScore >= 1.5) {
                result = 'Orta Kardiyovasküler Kondisyon';
                className = 'result-normal';
            } else {
                result = 'Zayıf Kardiyovasküler Kondisyon - Kardiyovasküler Antrenman Gerekli';
                className = 'result-risky';
            }

            testResults.cardiovascularTests = { stepTest, recoveryHR, maxHR, vo2max, score: cardioScore, result, status: className };
            
            resultDiv.innerHTML = `${result}<br><small>Step: ${stepTest}, Toparlanma: ${recoveryHR}bpm, VO2 Max: ${vo2max} ml/kg/dk</small>`;
            resultDiv.className = `result-display ${className}`;
            resultDiv.style.display = 'block';
        }

        // Initialize assessment when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeAssessment();
        });
    </script>
</body>
</html>